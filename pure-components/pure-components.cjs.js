"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});class Elements{constructor(s){if(typeof s=="string"&&(s=document.querySelector(s)),this.element=s,s!=null){this.block_name=this.constructor.name.toLowerCase(),this.elements=[],Elements.slots=Elements.slots||{},s||console.warn('Elements: element of class "%s" not found. Check the constructor argument of instance.',this.constructor.name);let t=s.querySelectorAll('[class*="'+this.block_name+'__"]');for(var o=0;o<t.length;o++){let n=t[o].classList.toString().match(/[a-z0-9-]*__[a-z0-9-]*/)[0].split("__")[1];s.querySelectorAll(this.block_name+"__"+n).length>1?(this["__"+n]==="undefined"&&(this["__"+n]=[]),this["__"+n].push(t[o])):this["__"+n]=t[o],typeof this.elements[n]>"u"&&(this.elements[n]=[]),this.elements[n].push(t[o])}}}static awake(){let name=this.name,elements;elements=document.querySelectorAll("."+name.toLowerCase());for(var i=0;i<elements.length;i++)elements[i],eval("new "+name+"( element )")}static get page(){return document.querySelector('meta[name="page"]').getAttribute("content")}static get assets_path(){return document.querySelector('meta[name="assets_path"]').getAttribute("content")}request(s,o,t={}){var n=new XMLHttpRequest,r="",p,g,h,d={};if(typeof t.file>"u"&&(t.file=!1),typeof t.json>"u"&&(t.json=!1),typeof t.alert_success>"u"&&(t.alert_success=!0),typeof t.alert_error>"u"&&(t.alert_error=!0),typeof o=="string"){p=document.querySelectorAll(o+" [name]");for(var m=0;m<p.length;m++)g=p[m].value,h=p[m].getAttribute("name"),d[h]=g}else d=o;n.open("POST",s,!0);var b=t.json==!1?"application/x-www-form-urlencoded; charset=UTF-8":"application/json; charset=UTF-8";if(!t.file&&n.setRequestHeader("Content-Type",b),n.onload=()=>{var e=n.responseText;try{e=JSON.parse(e)}catch(a){console.log(a,e)}n.status>=200&&n.status<400?(w(e),_(e)):(v(e),_(e))},n.onerror=()=>{let e=n.responseText;try{e=JSON.parse(e)}catch{console.log(e)}t.alert_error&&this.broadcast({event:"alert",payload:e}),v(e),_(e)},t.json==!1)for(let e in d)r+=encodeURIComponent(e)+"="+encodeURIComponent(d[e])+"&";else r=JSON.stringify(d);n.send(t.file?d:r);const w=e=>{e.status==0?t.alert_success&&this.broadcast({event:"alert",payload:e}):e.status==2&&t.alert_error&&this.broadcast({event:"alert",payload:e}),typeof t.done=="function"&&t.done(e)};function v(e){typeof t.fail=="function"&&t.fail(e)}function _(e){typeof t.always=="function"&&t.always(e)}}receive(s={event:"",from:"",do:null}){Elements.slots=Elements.slots||{},Elements.slots[this.block_name]=Elements.slots[this.block_name]||{},s.from?Elements.slots[this.block_name][s.from||"*"]={event:s.event,do:s.do}:(Elements.slots["*"]=Elements.slots["*"]||[],Elements.slots["*"][s.event]=Elements.slots["*"][s.event]||[],Elements.slots["*"][s.event].push(s.do))}broadcast(s={event:"",to:"",payload:null}){let o=Elements.slots[s.to],t=o&&o[this.block_name];t&&s.event==t.event?typeof t.do=="function"&&t.do(s.payload):(o=Elements.slots["*"],o&&(t=o[s.event]),t.map(n=>typeof n=="function"&&n(s.payload))),o||console.warn('Elements: slots of block "'+s.to+'" not found. Register slots of block using receive function or check block name in send function.'),t||console.warn('Elements: block "'+s.to+'" not contain slot for block "'+this.block_name+'". Check "from" field in receive functions.')}}class Alert extends Elements{constructor(o){super(o),this.receive({event:"alert",do:this.notification})}notification({status:o,message:t}){let n=document.querySelector(".alert-list");n===null&&(n=document.createElement("div"),n.classList.add("alert-list"),document.body.appendChild(n));let r=document.createElement("div"),p=document.createElement("div"),g="";switch(o){case 0:g="alert_success";break;case 1:g="alert_secondary";break;case 2:g="alert_error";break}r.classList.add("alert"),r.classList.add(g),r.classList.add("alert_bounceIn"),p.classList.add("text"),p.innerHTML=t,r.appendChild(p),n.appendChild(r),setTimeout(()=>{r.classList.remove("alert_bounceIn"),r.classList.add("alert_bounceOut"),setTimeout(()=>r.remove(),650)},5e3)}}function dropdown(){var s=[],o,t,n,r,p,g;s=document.querySelectorAll(".dropdown");for(var h=0;h<s.length;h++){var d,m;d=s[h].querySelector(".dropdown__toggle"),m=s[h].querySelector(".dropdown__content"),d!=null&&m!=null&&(d.onclick=b)}function b(a){var f=this.parentNode,l=this,c=f.querySelector(".dropdown__content");f.classList.contains("dropdown_active")?(f.classList.remove("dropdown_active"),window.removeEventListener("click",v,!0),g=f.getAttribute("data-dropdown-onclose"),typeof window[g]=="function"&&window[g]()):(p=f.getAttribute("data-dropdown-onopen"),typeof window[p]=="function"&&window[p](),o=_(),t=e(),c.style.marginLeft="0px",c.style.marginTop="0px",f.classList.add("dropdown_active"),w(f,l,c),v.prototype.dropdown_toggle=l,window.removeEventListener("click",v),window.addEventListener("click",v,!0))}function w(a,f,l){var c=f.getBoundingClientRect(),u=l.getBoundingClientRect(),y=Math.round(u.right+window.scrollX),x=Math.round(u.bottom+window.scrollY),H=window.innerWidth-document.documentElement.clientWidth,L=window.innerHeight-document.documentElement.clientHeight;n=Number(a.getAttribute("data-dropdown-offset-x")||0),r=Number(a.getAttribute("data-dropdown-offset-y")||0),a.setAttribute("data-dropdown-position","left-top"),l.style.marginLeft=n+"px",l.style.marginTop=r+"px",y+n+H<o&&x+r+L<t?(a.setAttribute("data-dropdown-position","left-top"),l.style.marginLeft=n+"px",l.style.marginTop=r+"px"):y+n+H>o&&x+r+L<t?(a.setAttribute("data-dropdown-position","right-top"),l.style.marginLeft=Number(Math.max(c.width,u.width)-Math.min(c.width,u.width)+n)*-1+"px",l.style.marginTop=r+"px"):y+n+H<o&&x+r+L>t?(a.setAttribute("data-dropdown-position","left-bottom"),l.style.marginLeft=n+"px",l.style.marginTop=Number(c.height+u.height+r)*-1+"px"):y+n+H>o&&x+r+L>t&&(a.setAttribute("data-dropdown-position","right-bottom"),l.style.marginLeft=Number(Math.max(c.width,u.width)-Math.min(c.width,u.width)+n)*-1+"px",l.style.marginTop=Number(c.height+u.height+r)*-1+"px")}function v(a){var f=document.querySelector(".dropdown_active");f!=null&&a.target!==v.prototype.dropdown_toggle&&a.target!=f&&!f.contains(a.target)&&(f.classList.remove("dropdown_active"),window.removeEventListener("click",v,!0),g=f.getAttribute("data-dropdown-onclose"),typeof window[g]=="function"&&window[g]())}function _(){return Math.max(document.body.scrollWidth,document.documentElement.scrollWidth,document.body.offsetWidth,document.documentElement.offsetWidth,document.body.clientWidth,document.documentElement.clientWidth)}function e(){return Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight)}}function viewer(){var s,o;s=document.querySelectorAll("[data-viewer-src]");for(var t=0;t<s.length;t++)n(s[t]);function n(h){var d,m;h.onclick=b;function b(e){for(var a=document.querySelectorAll(".viewer_active"),f=0;f<a.length;f++)a[f].click();d=document.createElement("div"),d.onclick=w,d.className="viewer",m=document.createElement("img"),m.className="viewer__image",m.setAttribute("src",this.getAttribute("data-viewer-src")),d.appendChild(m),document.body.appendChild(d),/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?o=new ZingTouch.Region(d,!1,!0):o=new ZingTouch.Region(d,!1,!1),r(m,d),p(m,d),g(m,d),_()>v()}function w(e){e.target===this&&(document.body.style.paddingRight=0,document.body.removeChild(this))}function v(){return window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight}function _(){return Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight)}}function r(h,d){o.bind(d,"swipe",function(m){const{velocity:b,currentDirection:w}=m.detail.data[0];b>=1.25&&w>=60&&w<=160&&d.click()})}function p(h,d){var m=new Transform(h),b=.2,w=3,v=0,_;h.scale=1,(function(e,a){var f="90%";if(e.offsetWidth>e.offsetHeight&&e.offsetWidth>a.offsetWidth)e.style.width=f;else if(!(e.offsetWidth>e.offsetHeight&&e.offsetWidth<=a.offsetWidth)){if(e.offsetWidth<e.offsetHeight&&e.offsetHeight>a.offsetHeight)e.style.height=f;else if(!(e.offsetWidth<e.offsetHeight&&e.offsetHeight<=a.offsetHeight))if(e.offsetWidth==e.offsetHeight&&e.offsetWidth>a.offsetWidth){var l=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,c=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;l>c?e.style.width=f:e.style.height=f}else e.offsetWidth==e.offsetHeight&&e.offsetWidth<=a.offsetWidth&&(e.style.width=f)}if(a.addEventListener("wheel",function(y){e.scale=y.deltaY<0?e.scale+=.1:e.scale-=.1,e.scale=e.scale>w?w:e.scale<b?b:e.scale,m.scale(e.scale),y.preventDefault()}),/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)){var u=.007;o.bind(a,"tap",function(y){y.target==a&&y.detail.events[0].originalEvent.type!="mouseup"&&a.click()}),o.bind(e,"tap",function(y){}),o.bind(a,"distance",function(y){v==0&&(v=y.detail.distance),_=Math.max(v,y.detail.distance)-Math.min(v,y.detail.distance),y.detail.change>0?e.scale+=_*u:e.scale-=_*u,e.scale=e.scale>w?w:e.scale<b?b:e.scale,requestAnimationFrame(function(){m.scale(e.scale)}),v=y.detail.distance}),document.body.addEventListener("touchend",function(y){v=0},!1)}})(h,d)}function g(h,d){var m=new Transform(h),b=new ZingTouch.Pan({threshold:5}),w=!1,v=0,_=0,e=0,a=0,f=0,l=0;o.bind(h,b,function(c){var u;w||(v=c.detail.events[0].pageX,_=c.detail.events[0].pageY),e=f+(c.detail.events[0].pageX-v),a=l+(c.detail.events[0].pageY-_),u=Math.max(1/h.scale,.6),m.translate({x:e*u,y:a*u}),w=!0}),window.addEventListener("touchend",function(c){var u=h.getBoundingClientRect();w&&(f=e,l=a,window.touchend=null,u.width<d.offsetWidth&&u.height<d.offsetHeight&&(m.translate({x:0,y:0}),f=0,l=0),w=!1)},!1),h.onmousedown=function(c){return v=c.pageX,_=c.pageY,document.onmousemove=function(u){return e=u.pageX-v+f,a=u.pageY-_+l,m.translate({x:e,y:a}),!1},h.onmouseup=function(u){var y=h.getBoundingClientRect();f=e,l=a,document.onmousemove=null,h.onmouseup=null,y.width<d.offsetWidth&&y.height<d.offsetHeight&&(m.translate({x:0,y:0}),f=0,l=0)},window.onmouseup=function(){var u=h.getBoundingClientRect();f=e,l=a,document.onmousemove=null,h.onmouseup=null,window.onmouseup=null,u.width<d.offsetWidth&&u.height<d.offsetHeight&&(m.translate({x:0,y:0}),f=0,l=0)},!1}}}function onbottom(s){window.addEventListener("scroll",function(){n()-(o()+t())==0&&typeof s=="function"&&s()});function o(){return window.scrollY||window.pageYOffset||document.documentElement.scrollTop}function t(){return window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight}function n(){return Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight)}}function overlay(){var s=[],o,t=[],n,r,p,g,h;t=document.querySelectorAll(".overlay"),t=Array.from(t);for(var d=0;d<t.length;++d)if(o=t[d],s=[],s=document.querySelectorAll(o.getAttribute("data-overlay-toggle")),o!==null&&s.length>0){for(var m=0;m<s.length;m++)s[m].onclick=w,s[m].index=d;o.classList.add("overlay"),o.onclick=v,p=o.querySelectorAll(o.getAttribute("data-overlay-close"));for(var b=0;b<p.length;b++)(function(l,c){l!=null&&(l.onclick=function(u){c.click(),u.stopPropagation()})})(p[b],o);t[d]=o}function w(l){for(var c=document.querySelectorAll(".overlay_active"),u=0;u<c.length;u++)c[u].click();document.body.classList.add("overlay__noscroll"),g=t[this.index].getAttribute("data-overlay-temporary"),h=t[this.index].getAttribute("data-overlay-temporary-duration"),t[this.index].classList.add(g),setTimeout(()=>{t[this.index].classList.remove(g)},h),/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&_(t[this.index]),f()>a()&&(document.body.style.paddingRight=e()+"px"),n=t[this.index].getAttribute("data-overlay-custom-x"),n!=null&&(t[this.index].style.left=n+"px"),r=t[this.index].getAttribute("data-overlay-custom-y"),r!=null&&(t[this.index].style.top=r+"px"),t[this.index].classList.add("overlay_active")}function v(l){l.target===this&&(document.body.classList.remove("overlay__noscroll"),document.querySelector("html").classList.remove("overlay__noscroll"),document.body.style.paddingRight=0,this.classList.remove("overlay_active"))}function _(l){var c=null,u=null,y=null;l.addEventListener("touchstart",x,!1),l.addEventListener("touchmove",H,!1),l.addEventListener("gesturestart",L,!1);function x(E){E.targetTouches.length===1&&(c=E.targetTouches[0].clientY)}function H(E){if(E.targetTouches.length===1){u=E.targetTouches[0].clientY,y=u-c<0?"down":"up",l.scrollTop===0&&y==="up"&&E.preventDefault();var T=l.scrollHeight-l.scrollTop===l.clientHeight;T&&y==="down"&&E.preventDefault()}}function L(E){return E.preventDefault()}}function e(){var l=document.createElement("p");l.style.width="100%",l.style.height="200px";var c=document.createElement("div");c.style.position="absolute",c.style.top="0px",c.style.left="0px",c.style.visibility="hidden",c.style.width="200px",c.style.height="150px",c.style.overflow="hidden",c.appendChild(l),document.body.appendChild(c);var u=l.offsetWidth;c.style.overflow="scroll";var y=l.offsetWidth;return u==y&&(y=c.clientWidth),document.body.removeChild(c),u-y}function a(){return window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight}function f(){return Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight)}}class Tabs extends Elements{constructor(o){if(super(o),this.element!=null){let t=this.elements.tab,n=this.elements.content;for(let r=0;r<t.length;r++)t[r].onclick=()=>{t.map(g=>{g.classList.remove("tabs__tab_active");let h=g.querySelector(".text");h.classList.remove("text_primary"),h.classList.add("text_secondary")}),n.map(g=>g.classList.remove("tabs__content_active")),t[r].classList.add("tabs__tab_active");let p=t[r].querySelector(".text");p.classList.remove("text_secondary"),p.classList.add("text_primary"),n[r].classList.add("tabs__content_active")};t[0].click()}}}function up(s){var o,t=!1,n;o=document.createElement("div"),o.className="up",typeof s>"u"&&(s="left"),o.classList.add("up_"+s),window.addEventListener("scroll",r,!1),o.onclick=p,document.body.appendChild(o);function r(h){document.body.scrollTop>70||document.documentElement.scrollTop>70?(t||o.classList.add("up_active"),t=!0):(o.onmouseout=g,new RegExp("(\\s|^)up_back(\\s|$)").test(o.className)||(o.classList.remove("up_active"),t=!1))}function p(h){document.body.scrollTop!=0||document.documentElement.scrollTop!=0?(n=document.documentElement.scrollTop||document.body.scrollTop,document.body.scrollTop=0,document.documentElement.scrollTop=0,o.classList.add("up_back")):(document.documentElement.scrollTop=n,document.body.scrollTop=n,o.classList.remove("up_back"))}function g(){Math.max(document.body.scrollTop,document.documentElement.scrollTop)===0&&(o.classList.remove("up_active"),o.classList.remove("up_back"),t=!1)}}exports.Alert=Alert;exports.Elements=Elements;exports.Tabs=Tabs;exports.dropdown=dropdown;exports.onbottom=onbottom;exports.overlay=overlay;exports.up=up;exports.viewer=viewer;
