
function dropdown()
{var dropdowns=[],old_doc_width,old_doc_height,customX,customY,offsetX,offsetY,onopen,onclose;dropdowns=document.querySelectorAll('.dropdown');for(var i=0;i<dropdowns.length;i++)
{var dropdown,dropdown_toggle,dropdown_content;dropdown_toggle=dropdowns[i].querySelector('.dropdown__toggle');dropdown_content=dropdowns[i].querySelector('.dropdown__content');if(dropdown_toggle!=null&&dropdown_content!=null)
dropdown_toggle.onclick=open;}
function open(e)
{var dropdown=this.parentNode,dropdown_toggle=this,dropdown_content=dropdown.querySelector('.dropdown__content');if(!dropdown.classList.contains('dropdown_active'))
{onopen=dropdown.getAttribute('data-dropdown-onopen');if(typeof window[onopen]==='function')window[onopen]();old_doc_width=documentWidth();old_doc_height=documentHeight();dropdown_content.style.marginLeft=0+'px';dropdown_content.style.marginTop=0+'px';dropdown.classList.add('dropdown_active');calculate(dropdown,dropdown_toggle,dropdown_content);close.prototype.dropdown_toggle=dropdown_toggle;window.removeEventListener('click',close);window.addEventListener('click',close,true);}
else
{dropdown.classList.remove('dropdown_active');window.removeEventListener('click',close,true);onclose=dropdown.getAttribute('data-dropdown-onclose');if(typeof window[onclose]==='function')window[onclose]();}}
function calculate(dropdown,dropdown_toggle,dropdown_content)
{var toggle_rect=dropdown_toggle.getBoundingClientRect(),content_rect=dropdown_content.getBoundingClientRect(),content_right=Math.round(content_rect.right+window.scrollX),content_bottom=Math.round(content_rect.bottom+window.scrollY),right_scrollbar_size=window.innerWidth-document.documentElement.clientWidth,bottom_scrollbar_size=window.innerHeight-document.documentElement.clientHeight;offsetX=Number(dropdown.getAttribute('data-dropdown-offset-x')||0);offsetY=Number(dropdown.getAttribute('data-dropdown-offset-y')||0);dropdown.setAttribute('data-dropdown-position','left-top');dropdown_content.style.marginLeft=offsetX+'px';dropdown_content.style.marginTop=offsetY+'px';if(content_right+offsetX+right_scrollbar_size<old_doc_width&&content_bottom+offsetY+bottom_scrollbar_size<old_doc_height)
{dropdown.setAttribute('data-dropdown-position','left-top');dropdown_content.style.marginLeft=offsetX+'px';dropdown_content.style.marginTop=offsetY+'px';}
else if(content_right+offsetX+right_scrollbar_size>old_doc_width&&content_bottom+offsetY+bottom_scrollbar_size<old_doc_height)
{dropdown.setAttribute('data-dropdown-position','right-top');dropdown_content.style.marginLeft=Number(Math.max(toggle_rect.width,content_rect.width)-Math.min(toggle_rect.width,content_rect.width)+offsetX)*-1+'px';dropdown_content.style.marginTop=offsetY+'px';}
else if(content_right+offsetX+right_scrollbar_size<old_doc_width&&content_bottom+offsetY+bottom_scrollbar_size>old_doc_height)
{dropdown.setAttribute('data-dropdown-position','left-bottom');dropdown_content.style.marginLeft=offsetX+'px';dropdown_content.style.marginTop=Number(toggle_rect.height+content_rect.height+offsetY)*-1+'px';}
else if(content_right+offsetX+right_scrollbar_size>old_doc_width&&content_bottom+offsetY+bottom_scrollbar_size>old_doc_height)
{dropdown.setAttribute('data-dropdown-position','right-bottom');dropdown_content.style.marginLeft=Number(Math.max(toggle_rect.width,content_rect.width)-Math.min(toggle_rect.width,content_rect.width)+offsetX)*-1+'px';dropdown_content.style.marginTop=Number(toggle_rect.height+content_rect.height+offsetY)*-1+'px';}}
function close(e)
{var dropdown=document.querySelector('.dropdown_active');if(dropdown!=null&&e.target!==close.prototype.dropdown_toggle&&e.target!=dropdown&&!dropdown.contains(e.target))
{dropdown.classList.remove('dropdown_active');window.removeEventListener('click',close,true);onclose=dropdown.getAttribute('data-dropdown-onclose');if(typeof window[onclose]==='function')window[onclose]();}}
function documentWidth()
{return Math.max(document.body.scrollWidth,document.documentElement.scrollWidth,document.body.offsetWidth,document.documentElement.offsetWidth,document.body.clientWidth,document.documentElement.clientWidth);}
function documentHeight()
{return Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight);}}